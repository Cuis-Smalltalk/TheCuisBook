<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This book is for Cuis-Smalltalk (5.0#4253), a free and modern
implementation of the Smalltalk language and environment.

Copyright (C) 2020 Hilaire Fernandes and Juan Vuletich

Compilation : July 26, 2020

Documentation source: https://github.com/Cuis-Smalltalk/TheCuisBook 



The contents of this book are protected under Creative Commons
Attribution-ShareAlike 4.0 International.

You are free to:


Share - copy and redistribute the material in any medium or
format


Adapt - remix, transform, and build upon the material for any
purpose, even commercially.



Under the following terms:


Attribution. You must give appropriate credit, provide a link to
the license, and indicate if changes were made. You may do so in any
reasonable manner, but not in any way that suggests the licensor
endorses you or your use.


Share Alike. If you remix, transform, or build upon the material,
you must distribute your contributions under the same license as the
original.

Complete license: https://creativecommons.org/licenses/by-sa/4.0/legalcode
 -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Introduction to the system classes (The Cuis-Smalltalk Book)</title>

<meta name="description" content="Introduction to the system classes (The Cuis-Smalltalk Book)">
<meta name="keywords" content="Introduction to the system classes (The Cuis-Smalltalk Book)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html#Top" rel="start" title="Top">
<link href="Indexes.html#Indexes" rel="index" title="Indexes">
<link href="Getting-started.html#Getting-started" rel="up" title="Getting started">
<link href="Writing-your-first-application.html#Writing-your-first-application" rel="next" title="Writing your first application">
<link href="Writing-your-first-scripts.html#Writing-your-first-scripts" rel="prev" title="Writing your first scripts">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="en">
<a name="Introduction-to-the-system-classes"></a>
<div class="header">
<p>
Previous: <a href="Writing-your-first-scripts.html#Writing-your-first-scripts" accesskey="p" rel="prev">Writing your first scripts</a>, Up: <a href="Getting-started.html#Getting-started" accesskey="u" rel="up">Getting started</a> &nbsp; [<a href="Indexes.html#Indexes" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Introduction-to-the-system-classes-1"></a>
<h3 class="section">1.3 Introduction to the system classes</h3>
<p>Cuis-Smalltalk is a pure object oriented language: all the entities as
integer, float, rational number, string, collection, block of code we
discovered in the previous section are objects.
</p>
<a name="Understanding-Object-Oriented-Programming"></a>
<h4 class="subsection">1.3.1 Understanding Object Oriented Programming</h4>
<p>But what is an object?  An object is an entity responding to two
criteria:
</p>
<ul>
<li> <strong>An internal state.</strong> It is materialized by variable(s)
   known only by the object. A variable only visible within the object
   is called <em>private</em>. As a consequence, it is impossible &ndash; if
   the object decides so &ndash; to know the internal state of the object
   from another object.

</li><li> <strong>A behavior.</strong> It is modeled by message(s) &ndash; we
   already used this vocabulary &ndash; sent to the object. When the object
   receives a message it understands, it executes the code of an
   internal method named as the message.

</li></ul>
<a name="index-class"></a>
<a name="index-subclass"></a>
<a name="index-instance"></a>

<p>Several entities sharing the same variables and messages understanding
are very likely to exist within Cuis-Smalltalk &ndash; think about the
numbers. Therefore, entities are created &ndash; <em>instantiated</em> &ndash;
following a model, this model is called a <em>Class</em>.
</p>
<p>A specific class declares the internal variables and the behavior by
implementing the methods. Let see how the <span class="sansserif">Fraction</span> class is
declared:
</p>
<div class="display">
<pre class="display"><span class="sansserif">Number subclass: #Fraction
   instanceVariableNames: &rsquo;numerator denominator&rsquo;
   classVariableNames: &rdquo;
   poolDictionaries: &rdquo;
   category: &rsquo;Kernel-Numbers&rsquo;</span>
</pre></div>

<p>As expected there are two variables &ndash; named <em>instance variables</em>
&ndash; to define the <span class="sansserif">numerator</span> and <span class="sansserif">denominator</span> of
a fraction. From this declaration, we observe there is a hierarchy in
the class definition: <span class="sansserif">Fraction</span> is a kind of
<span class="sansserif">Number</span>. This means a fraction inherits the internal state &ndash;
variables &ndash; and behavior &ndash; methods &ndash; defined in the <span class="sansserif">Number</span>
class. <span class="sansserif">Fraction</span> is called a <em>subclass</em> of <span class="sansserif">Number</span>.
</p>
<p>This aspect of object oriented programming is called
<em>inheritance</em>. In Cuis-Smalltalk, each class inherits from one parent
class.
</p>
<a name="index-instance_002c-creation"></a>
<a name="index-class_002c-class-method"></a>
<p>In the previous section, we already met fraction. Those fractions are
objects called <em>instance</em> of the class <span class="sansserif">Fraction</span>. To create
this instance we wrote <span class="sansserif">5 / 4</span>, the mechanism is based on
message sending and polymorphism. The number <span class="sansserif">5</span> is an
integer receiving the message <span class="sansserif">#/</span>, therefore looking at the method
<span class="sansserif">/</span> in the <span class="sansserif">Integer</span> class explains how is instantiated
the fraction. See part of this method:
</p><div class="display">
<pre class="display"><span class="sansserif">/ aNumber
&quot;Refer to the comment in Number / &quot;
| quoRem |
aNumber isInteger ifTrue:
../..
   ifFalse: [^ (Fraction numerator: self denominator: aNumber) reduced]].
../..</span>
</pre></div>

<p>From this source code, we learn that in some situation, the method
returns a fraction, reduced. We can expect that in some other
situation an integer is returned, for example <span class="sansserif">6 / 2</span>.
</p>
<p>In the example, we observe the message <span class="sansserif">#numerator:denominator:</span> is
sent to the class <span class="sansserif">Fraction</span>, such a message refers to a
<em>class method</em> understood only by the <span class="sansserif">Fraction</span> class. It
is expected such a named method returns an instance of a
<span class="sansserif">Fraction</span>.
</p>
<p>Try out in a workspace:
</p><div class="display">
<pre class="display"><span class="sansserif">Fraction numerator: 24 denominator: 21
&rArr; 24/21</span>
</pre></div>

<p>Observe how the fraction is not reduced. Whereas it is, when
instantiated with the <span class="sansserif">#/</span> message:
</p>
<div class="display">
<pre class="display"><span class="sansserif">24 / 21
&rArr; 8/7</span>
</pre></div>

<p>A class method is often used to create a new instance from a class. In
<a href="Writing-your-first-scripts.html#forLoop"><em>Example</em> 1.13</a>, the message <span class="sansserif">#new</span> is sent to the class
<span class="sansserif">OrderedCollection</span> to create a new empty collection;
<span class="sansserif">new</span> is a class method.
</p>
<p>In <a href="Writing-your-first-scripts.html#repeatLoop"><em>Example</em> 1.14</a>, the <span class="sansserif">#newFrom:</span> message is sent to the class
<span class="sansserif">OrdredCollection</span> to create a new collection filled with
elements from the array given in argument; <span class="sansserif">newFrom:</span> is
another class method.
</p>
<a name="index-class_002c-instance-method"></a>
<a name="index-polymorphism"></a>
<a name="index-number_002c-_0023squared-1"></a>
<p>Now observe the hierarchy of the Number class:
</p>
<div class="format">
<pre class="format"><span class="sansserif">Number</span>
   <span class="sansserif">Float</span>
      <span class="sansserif">BoxedFloat64</span>
      <span class="sansserif">SmallFloat64</span>
   <span class="sansserif">Fraction</span>
   <span class="sansserif">Integer</span>
      <span class="sansserif">LargePositiveInteger</span>
         <span class="sansserif">LargeNegativeInteger</span>
      <span class="sansserif">SmalltalkInteger</span>
</pre></div>

<p><span class="sansserif">Float</span>, <span class="sansserif">Integer</span> and <span class="sansserif">Fraction</span> are direct
descendants of the <span class="sansserif">Number</span> class. We already learnt about the
<span class="sansserif">#squared</span> message sent to integer and fraction instances:
</p>
<div class="display">
<pre class="display"><span class="sansserif">16 squared &rArr; 256
(2 / 3) squared &rArr; 4/9</span>
</pre></div>

<p>As the <span class="sansserif">#squared</span> message is sent to <span class="sansserif">Integer</span> and
<span class="sansserif">Fraction</span> instances, the associated <span class="sansserif">squared</span> method is
called an <em>instance method</em>. This method is defined in both the
<span class="sansserif">Number</span> and <span class="sansserif">Fraction</span> classes.
</p>

<p>Let&rsquo;s examine this method in <span class="sansserif">Number</span>:
</p><div class="display">
<pre class="display"><span class="sansserif">Number&gt;&gt;squared
&quot;Answer the receiver multiplied by itself.&quot;
   ^self * self</span>
</pre></div>

<p>In an instance method source code, <span class="sansserif">self</span> refers to the
object itself, here it is the value of the number. The <span class="sansserif">^</span>
symbol indicates to return the following value <span class="sansserif">self *
self</span>.
</p>
<p>Now let&rsquo;s examine this same method in <span class="sansserif">Fraction</span>:
</p><div class="display">
<pre class="display"><span class="sansserif">Fraction&gt;&gt;squared
   ^ Fraction
      numerator: numerator squared
      denominator: denominator squared</span>
</pre></div>

<p>Here a new fraction is instantiated with numerator and denominator
squared. This alternate <span class="sansserif">squared</span> method, ensure a fraction is
returned.
</p>
<p>When message <span class="sansserif">#squared</span> is sent to a number, different methods are
executed depending on the number is a fraction or any other kind of
number. This fundamental mechanism of oriented object programming is
called <em>Polymorphism</em>. More precisely, the <span class="sansserif">Fraction</span> class
is <em>overriding</em> the <span class="sansserif">squared</span> method, defined above in the
class hierarchy.
</p>
<a name="index-number_002c-_0023abs"></a>
<p>Still in the <span class="sansserif">Number</span> hierarchy, let&rsquo;s examine another example
of polymorphism with the <span class="sansserif">#abs</span> message:
</p>
<div class="display">
<pre class="display"><span class="sansserif">-10 abs &rArr; 10
5.3 abs &rArr; 5.3
(-5 / 3) abs &rArr; 5/3</span>
</pre></div>

<p>The implementation in <span class="sansserif">Number</span> does not need much
explanation. There is the <span class="sansserif">#ifTrue:ifFalse:</span> we have not yet
discussed so far, but the code is quite self-explanatory:
</p>
<div class="display">
<pre class="display"><span class="sansserif">Number&gt;&gt;abs
&quot;Answer a Number that is the absolute value (positive magnitude) of the 
receiver.&quot;
   self &lt; 0
      ifTrue: [^self negated]
      ifFalse: [^self]</span>
</pre></div>

<p>This implementation will do just fine for the <span class="sansserif">Number</span>
subclasses. Nevertheless, there are several classes overriding it for
optimization purpose.
</p>
<p>For example, regarding large positive integer, <span class="sansserif">abs</span> is
empty. Indeed, in the absence of explicitly returned value, the
default returned value is the instance itself, in our situation the
<span class="sansserif">LargePositiveInteger</span> instance:
</p>
<div class="display">
<pre class="display"><span class="sansserif">LargePositiveInteger&gt;&gt;abs</span>
</pre></div>

<p>The <span class="sansserif">LargeNegativeInteger</span> counter part compute the opposite
with <span class="sansserif">#negated</span> message:
</p>
<div class="display">
<pre class="display"><span class="sansserif">LargeNegativeInteger&gt;&gt;abs
   ^ self negated</span>
</pre></div>
   
<p>These two overriding methods are more efficient as they avoid test and
ifTrue/ifFasse branches. Polymorphism is often used to avoid test and
branching, it is done at the object level.
</p>
<p>This brief introduction to the oriented object programming gave you
the basic elements to understand how the system classes are
implemented in Cuis-Smalltalk.
</p>
<a name="Cuis_002dSmalltalk-system-classes"></a>
<h4 class="subsection">1.3.2 Cuis-Smalltalk system classes</h4>
<p>As we already wrote Cuis-Smalltalk is a pure object oriented environment. It
means that every single entities you are dealing with are represented
as instances of classes written in Cuis-Smalltalk itself. As a direct
consequence, Cuis-Smalltalk is mostly written in itself.  In the previous
section we read some details of the <span class="sansserif">Fraction</span> class and both
instance and class side methods (<span class="sansserif">abs</span>, <span class="sansserif">squared</span> and
<span class="sansserif">numerator:denominator:</span>.
</p>
<p>What we call system classes are models of fundamental objects. In
other programming languages, it will be called standard library.
</p>
<p>To be honest, there is no such a distinction between system classes
and user classes, but it will help us to draw a boundary around the
most used objects. We will give a brief introduction to these classes
and the most important methods, part two gives a more detailed
presentation. To ease the presentation of these classes we will
introduce the system browser.
</p>
<a name="index-tools_002c-system-browser"></a>
<a name="index-browser"></a>
<a name="The-system-browser"></a>
<h4 class="subsubsection">1.3.2.1 The system browser</h4>
<p>The <em>System Browser</em>, in short the <em>Browser</em>, is a tool to
rule all the classes in Cuis-Smalltalk. It is both a tool to explore the
classes (system or user ones) and to write new classes and methods.
</p>
<p>To access the tool, ...Background click &rarr;
Open... &rarr; Browser...
</p>
<div class="float"><a name="browserDetailed"></a>
<div align="center"><img src="browserDetailed.png" alt="browserDetailed">
</div>
<div class="float-caption"><p><strong><em>Figure</em> 1.3: </strong>The System Browser</p></div></div>
<a name="index-browser_002c-class-category"></a>
<p>At the top left are the <em>class categories</em>, there are group of
classes part of the same theme. It is also called <em>Package</em>, it is
an organisational element to save code. In <a href="#browserDetailed"><em>Figure</em> 1.3</a>, the
selected class category is <span class="sansserif">Kernel-Numbers</span>, a group of
classes we already explored. The term <span class="sansserif">Kernel-</span> indicates it
is part of fundamental categories, but it is only a convention. See
the other categories as <span class="sansserif">Kernel-Text</span> and
<span class="sansserif">Kernel-Chronology</span> related to text and date entities.
</p>
<a name="index-class_002c-declaration"></a>
<p>Next to the right are the classes in the select class categories. They
are nice presented in a parent-child class hierarchy. When a class is
first selected in this pane, its declaration appears in the large pane
bellow, the <span class="sansserif">Number</span> class declaration is:
</p>
<div class="display">
<pre class="display"><span class="sansserif">Magnitude subclass: #Number
   instanceVariableNames: &rdquo;
   classVariableNames: &rdquo;
   poolDictionaries: &rdquo;
   category: &rsquo;Kernel-Numbers&rsquo;</span>
</pre></div>

<p>Observe a few important point in this declaration:
</p>
<ul>
<li> <span class="sansserif">Number</span> is a sub class of <span class="sansserif">Magnitude</span>

</li><li> the declaration itself is Smalltalk code, indeed here the
   message
   <span class="sansserif">#subclass:instanceVariableNames:classVariableNames:poolDictionaries:category:</span>
   is sent to <span class="sansserif">Magnitude</span>

</li><li> the <span class="sansserif">subclass:</span> argument <span class="sansserif">Number</span> is prefixed
   with &ldquo;#&rdquo;, it is a symbol, a kind of unique string. Indeed when
   declaring the <span class="sansserif">Number</span> class, the system does not know it
   yet.

</li><li> The <span class="sansserif">instanceVariableNames:</span> argument are string:
   the instance variables of the class are declared only by name.

</li></ul>



<hr>
<div class="header">
<p>
Previous: <a href="Writing-your-first-scripts.html#Writing-your-first-scripts" accesskey="p" rel="prev">Writing your first scripts</a>, Up: <a href="Getting-started.html#Getting-started" accesskey="u" rel="up">Getting started</a> &nbsp; [<a href="Indexes.html#Indexes" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
