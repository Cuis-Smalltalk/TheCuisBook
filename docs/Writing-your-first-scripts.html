<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This book is for Cuis-Smalltalk (5.0#4253), a free and modern
implementation of the Smalltalk language and environment.

Copyright (C) 2020 Hilaire Fernandes and Juan Vuletich

Compilation : August 4, 2020

Documentation source: https://github.com/Cuis-Smalltalk/TheCuisBook 



The contents of this book are protected under Creative Commons
Attribution-ShareAlike 4.0 International.

You are free to:


Share - copy and redistribute the material in any medium or
format


Adapt - remix, transform, and build upon the material for any
purpose, even commercially.



Under the following terms:


Attribution. You must give appropriate credit, provide a link to
the license, and indicate if changes were made. You may do so in any
reasonable manner, but not in any way that suggests the licensor
endorses you or your use.


Share Alike. If you remix, transform, or build upon the material,
you must distribute your contributions under the same license as the
original.

Complete license: https://creativecommons.org/licenses/by-sa/4.0/legalcode
 -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Writing your first scripts (The Cuis-Smalltalk Book)</title>

<meta name="description" content="Writing your first scripts (The Cuis-Smalltalk Book)">
<meta name="keywords" content="Writing your first scripts (The Cuis-Smalltalk Book)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html#Top" rel="start" title="Top">
<link href="Indexes.html#Indexes" rel="index" title="Indexes">
<link href="Getting-started.html#Getting-started" rel="up" title="Getting started">
<link href="Introduction-to-the-system-classes.html#Introduction-to-the-system-classes" rel="next" title="Introduction to the system classes">
<link href="Installing-and-configuring-Cuis_002dSmalltalk.html#Installing-and-configuring-Cuis_002dSmalltalk" rel="prev" title="Installing and configuring Cuis-Smalltalk">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="en">
<a name="Writing-your-first-scripts"></a>
<div class="header">
<p>
Next: <a href="Introduction-to-the-system-classes.html#Introduction-to-the-system-classes" accesskey="n" rel="next">Introduction to the system classes</a>, Previous: <a href="Installing-and-configuring-Cuis_002dSmalltalk.html#Installing-and-configuring-Cuis_002dSmalltalk" accesskey="p" rel="prev">Installing and configuring Cuis-Smalltalk</a>, Up: <a href="Getting-started.html#Getting-started" accesskey="u" rel="up">Getting started</a> &nbsp; [<a href="Indexes.html#Indexes" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Writing-your-first-scripts-1"></a>
<h3 class="section">1.2 Writing your first scripts</h3>
<p>In this section we present a few scripts so you will get a taste and
feeling about Smalltalk code. The examples are associated with small
exercises to experiment with and accompanied with solutions in the
annex. We intentionally keep the details of the syntax out of this
section.
</p>
<p>Smalltalk script are usually written in a Workspace. The usual
<em>Hello world!</em> program is written as:
</p>
<div class="float"><a name="hello"></a>
<div class="display">
<pre class="display"><span class="sansserif">Transcript show: &rsquo;Hello World&rsquo;</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.1: </strong>The traditional &rsquo;Hello World!&rsquo; program</p></div></div>
<a name="index-tools_002c-transcript"></a>
<p>To execute this code, select it with the mouse and
...right mouse click &rarr; Do it (d)...  Nothing
happen! Indeed to see the output, you need a <em>Transcript</em> window,
it is a place where programmer send information for the user as we are
doing in our example. Do ...Background click &rarr;
Open... &rarr; Transcript... and execute again the code.
</p>
<div class="float"><a name="B_002d01_002dimg2"></a>
<div align="center"><img src="B-01-img2.png" alt="B-01-img2">
</div>
<div class="float-caption"><p><strong><em>Figure</em> 1.3: </strong>Transcript window with output</p></div></div>
<p>This code comes in three parts:
</p>
<ul>
<li> the literal <span class="sansserif">&rsquo;Hello World!&rsquo;</span>  

</li><li> the message <span class="sansserif">#show:</span> with its argument <span class="sansserif">&rsquo;Hello World!&rsquo;</span>

</li><li> the class <span class="sansserif">Transcript</span> receiving the message <span class="sansserif">#show:</span> with its argument

</li></ul>

<p>The action of printing takes place in the class
<span class="sansserif">Transcript</span>. The code execution is invoked with keyboard
shortcuts <kbd>Ctrl-A</kbd> then <kbd>Ctrl-D</kbd> (<em><b>D</b>o it</em>).
</p>
<div class="float"><a name="hello2"></a>
<div class="display">
<pre class="display"><span class="sansserif">Transcript show: &rsquo;Hello World!&rsquo;.
Transcript newLine.
Transcript show: &rsquo;I am Cuising&rsquo;</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.2: </strong>Multiple lines</p></div></div>
<p>In this three lines script, observe how the line are separated by a
dot &ldquo;.&rdquo;. It is really a line separator not needed in the third line
nor in a one line script. The message <span class="sansserif">#newLine</span> has no argument.
</p>
<a name="index-cascade-of-messages"></a>
<p>In the <a href="#hello2"><em>Example</em> 1.2</a> example, the message <span class="sansserif">#show:</span> and <span class="sansserif">#newLine</span>
are sent to the same <span class="sansserif">Transcript</span> class. In such circumstance,
we can use the cascade technique to avoid this repetition. The
receiver <span class="sansserif">Transcript</span> is written once and the sent messages are
separated by semicolon:
</p>
<div class="float"><a name="helloCascade"></a>
<div class="display">
<pre class="display"><span class="sansserif">Transcript
   show: &rsquo;Hello World!&rsquo;;
   newLine;
   show: &rsquo;I am Cuising&rsquo;</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.3: </strong>Cascade of message</p></div></div>
<p>Observe the text layout to ease code understanding. It is possible to
write the cascade of messages in one line, but it reduces the
readability of the code:
</p>
<div class="display">
<pre class="display"><span class="sansserif">Transcript show: &rsquo;Hello World!&rsquo;; newLine; show: &rsquo;I
am Cuising&rsquo;</span>
</pre></div>

<p>The <span class="sansserif">Transcript</span> class is most of the time used to output useful
information when developing an application. As an alternative to the
<kbd>Ctrl-d</kbd> shortcut, <kbd>Ctrl-p</kbd> (<em><b>P</b>rint it</em>) executes the
script and prints in the Workspace the result of the last line of the
script.
</p>
<a name="Fun-with-numbers"></a>
<h4 class="subsection">1.2.1 Fun with numbers</h4>
<a name="index-number_002c-integer"></a>

<p>In your Workspace, to compute a factorial execute the example bellow
with <kbd>Ctrl-a</kbd> then <kbd>Ctrl-p</kbd>:
</p><div class="display">
<pre class="display"><span class="sansserif">100 factorial
&rArr;  9332621544394415268169923885626670049071596826438162146859
29638952175999932299156089414639761565182862536979208272237582
51185210916864000000000000000000000000</span>
</pre></div>

<p>Cuis-Smalltalk handles very large integer number without the need to use
special type or method. To convince yourelf try the example bellow:
</p><div class="display">
<pre class="display"><span class="sansserif">10000 factorial / 9999 factorial
&rArr; 10000</span>
</pre></div>

<p>If you execute and print with <kbd>Ctrl-p</kbd> <span class="sansserif">10000
factorial</span>, you realize it takes far more time to print one factorial
than computing two factorials and a division. The result is an integer
as expected, not a decimal number answer as many computer languages
will return.
</p>
<p>As we are discussing division, you may not get the result you think:
</p><div class="display">
<pre class="display"><span class="sansserif">15 / 4
&rArr; 15/4</span>
</pre></div>

<p>It looks like Cuis-Smalltalk is lazy because it does not respond the decimal
number <span class="sansserif">3.75</span> as we were expecting. In fact Cuis-Smalltalk wants to
be as accurate as possible, and its answer is a rational fraction! After
all, fractions are just division we are too lazy &ndash; because it
is troublesome &ndash; to compute, Cuis-Smalltalk does just that!
</p>
<p>Try out this to understand what is happening underneath:
</p><div class="display">
<pre class="display"><span class="sansserif">(15 / 4) + (1 / 4)
&rArr; 4</span>
</pre></div>

<p>Is it not wonderful? Cuis-Smalltalk computes with rational numbers. We
started with division and addition operations on integer, and we got
an accurate result thanks to intermediate computation on rational
numbers.
</p>
<blockquote class="indentedblock">
<p>&nbsp;<img src="note.png" alt="note">
In the example, observe how the parenthesis are used
although in arithmetic calculation the division is operated first. With
Cuis-Smalltalk you need to explicit the order of operation with
parenthesis. We will explain why in Part Two.
</p></blockquote>

<div class="float"><a name="inverseSum"></a>
<blockquote class="indentedblock">
<p><em>Write the code to compute the
sum of the first four integer inverses.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.2: </strong>Inverse sum</p></div></div><a name="index-number_002c-root"></a>
<a name="index-number_002c-_0023sqrt"></a>
<a name="index-number_002c-_0023squared"></a>
<p>All four arithmetic operations and mathematical functions are
compatible with the rational number representation:
</p><div class="display">
<pre class="display"><span class="sansserif">(15 / 14) * (21 / 5) &rArr; 9 / 2
(15 / 14) / ( 5 / 21) &rArr; 9 /2 
(3 / 4) squared &rArr; 9 / 16
(25 / 4) sqrt &rArr; 5 / 2</span>
</pre></div>

<div class="float"><a name="squaredSum"></a>
<blockquote class="indentedblock">
<p>Write the code to compute the
sum of the squares of the inverse of the first four integers.
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.3: </strong>Sum of the squares</p></div></div>
<a name="index-number_002c-decimal-division"></a>
<p>If Cuis-Smalltalk divides integer as rational number, how to compute the
decimal division? One option is to write a number as a <em>Float</em>, it
is the decimal representation in programming language, the integer
part and fractional parts are separated by a dot &ldquo;.&rdquo;:
</p><div class="display">
<pre class="display"><span class="sansserif">15.0 / 4 &rArr;3.75
15 / 4.0 &rArr; 3.75</span>
</pre></div>

<p>Another option is to convert an integer to a float with the
<span class="sansserif">#asFloat</span> message. It is very useful when the integer is in a
variable:
</p>
<div class="display">
<pre class="display"><span class="sansserif">15 asFloat / 4
&rArr; 3.75</span>
</pre></div>

<a name="index-number_002c-integer-division"></a>
<p>Alternatively to the decimal division, you ask integer division with
the message <span class="sansserif">#//</span>:
</p><div class="display">
<pre class="display"><span class="sansserif">15 // 4
&rArr; 3</span>
</pre></div>

<a name="index-number_002c-division-reminder"></a>
<p>The reminder of the Euclidean division is computed with the message
<span class="sansserif">#\\</span>:
</p><div class="display">
<pre class="display"><span class="sansserif">15 \\ 4
&rArr; 3</span>
</pre></div>


<a name="index-number_002c-_0023odd"></a>
<a name="index-number_002c-_0023even"></a>
<a name="index-number_002c-_0023isPrime"></a>
<a name="index-number_002c-_0023isDivisibleBy_003a"></a>
<p>Cuis-Smalltalk knows some arithmetic operations to test if an integer is an
odd, even or prime number. You just send the appropriate message to
the number:
</p>
<div class="float"><a name="integerBasicTest"></a>
<div class="display">
<pre class="display"><span class="sansserif">25 odd &rArr; true
25 even &rArr; false
25 isPrime &rArr; false
23 isPrime &rArr; true
91 isDivisibleBy: 7 &rArr; true
117 isDivisibleBy: 7 &rArr; false
117 isDivisibleBy: 9 &rArr; true</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.4: </strong>Testing on integer</p></div></div>
<a name="index-number_002c-_0023gcd_003a"></a>
<a name="index-number_002c-_0023lcm_003a"></a>
<p>With specific <em>keyword messages</em> you compute the Least Common
Multiple and Greatest Common Divisor. A keyword message is composed of
one or several colon(s) &ldquo;:&rdquo; to insert argument(s):
</p>
<div class="display">
<pre class="display"><span class="sansserif">12 lcm: 15 &rArr; 60
12 gcd: 15 &rArr; 3</span>
</pre></div>
<p>Integer can be printed in different forms:
</p>
<a name="index-number_002c-roman"></a>
<a name="index-number_002c-as-words"></a>
<a name="index-number_002c-base"></a>
<div class="display">
<pre class="display"><span class="sansserif">2020 printStringRoman &rArr; &rsquo;MMXX&rsquo; 
2020 printStringWords  &rArr; &rsquo;two thousand, twenty&rsquo;
&quot;Number as the Maya did&quot;
2020 printStringBase: 20 &rArr; &rsquo;510&rsquo;</span>
</pre></div>


<a name="Hiatus-with-decimal-numbers"></a>
<h4 class="subsubheading">Hiatus with decimal numbers</h4>
<a name="index-number_002c-decimal"></a>
<p>We saw decimal numbers are written with a dot &ldquo;.&rdquo; to separate the
integer and the decimal parts: <span class="sansserif">1.5</span>, <span class="sansserif">1235.021</span>
or <span class="sansserif">0.5</span>. The number <span class="sansserif">0.00004</span> is more easily
written <span class="sansserif">4e-5</span>; it means 4 preceded by 5 zeros or 4 as the
fifth digit after the decimal dot.
</p>
<p><strong>Attention.</strong> Computer represents decimal number
imprecisely. You need to be aware of that when doing computation and
equality comparison. Most system hides these errors because there are
very tiny errors. Cuis-Smalltalk does not hide these inaccuracy.
</p>
<div class="float"><a name="FloatPrecision"></a>
<div class="display">
<pre class="display"><span class="sansserif">0.1 + 0.2 - 0.3
&rArr; 5.551115123125783e-17</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.5: </strong>Computer dyscalculia!</p></div></div>
<p>In <a href="#FloatPrecision"><em>Example</em> 1.5</a>, the returned value should be zero but it is
not the case. The computer returns <span class="sansserif">5.55e-17</span>, or
<span class="sansserif">0.0000000000000000555</span>, it is very close to zero, but there
is an error.
</p>
<div class="float"><a name="exeFloatPrecision"></a>
<blockquote class="indentedblock">
<p><em>Give 3 calculations showing errors compared
to the expected results.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.4: </strong>Miscellaneous calculation errors with decimal
number</p></div></div>
<p>When accuracy is absolutely mandatory use the Rational Numbers
representation of Cuis-Smalltalk.
</p>
<a name="index-number_002c-rational"></a>
<a name="index-number_002c-fraction"></a>
<p>A rational number is written with the division symbol between two
integers: do <kbd>Ctrl-p</kbd> on <span class="sansserif">5/2</span> &rArr;
<span class="sansserif">5/2</span>. Cuis-Smalltalk returns a rational fraction, it does not compute a
decimal.
</p>
<div class="float"><a name="exeZeroDivide"></a>
<blockquote class="indentedblock">
<p><em>What happen when
executing this code</em> <span class="sansserif">5/0</span><em>?</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.5: </strong>Toward the infinite</p></div></div>
<p>Let&rsquo;s come back to our computer dyscalculia with decimal numbers. When
using the rational numbers, the <a href="#FloatPrecision"><em>Example</em> 1.5</a> becomes:
</p>
<div class="float"><a name="FractionPrecision"></a>
<div class="display">
<pre class="display"><span class="sansserif">(1/10) + (2/10) - (3/10)
&rArr; 0</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.6: </strong>Right with fraction!</p></div></div>
<p>This time we have the expected result. Underneath the computer only
does the calculations with integers.
</p>
<div class="float"><a name="exeFractionPrecision"></a>
<blockquote class="indentedblock">
<p><em>Return to
<a href="#exeFloatPrecision"><em>Exercise</em> 1.4</a> and use rational writing to represent decimal
numbers. The errors are gone.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.6: </strong>Fix the errors</p></div></div>
<p>Cuis-Smalltalk knows how to convert a decimal number as a fraction, by
sending the message <span class="sansserif">#asFraction</span>. We already acknowledged the
computer dyscalculia trouble with decimal number, this is why when
asking for a fraction representation we have this strange answer. The
internal computer represenation of <span class="sansserif">1.3</span> is not exactly as
it seems:
</p>
<div class="display">
<pre class="display"><span class="sansserif">(13/10) asFloat
&rArr; 1.3</span>
</pre></div>
<div class="display">
<pre class="display"><span class="sansserif">(13/10) asFloat asFraction
&rArr; 5854679515581645/45035996273704</span>
</pre></div>

<a name="Fun-with-text"></a>
<h4 class="subsection">1.2.2 Fun with text</h4>
<a name="index-string"></a>
<p>A <em>String</em> is the way text is represented in a programming
language, it is a collection of characters. We already met string with
our first script, it is enclosed in single quotes:
<span class="sansserif">&rsquo;hello world!&rsquo;</span>. We capitalize it with the <span class="sansserif">#capitalized</span>:
</p>
<a name="index-string_002c-capitalized"></a>
<div class="display">
<pre class="display"><span class="sansserif">&rsquo;hello world!&rsquo; capitalized
&rArr; &rsquo;Hello world!&rsquo; </span>
</pre></div>

<div class="float"><a name="capWordNumber"></a>
<blockquote class="indentedblock">
<p><em>Print 2020 as
words capitalized.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.7: </strong>Capitalize number as words</p></div></div>
<a name="index-string_002c-concatenate"></a>
<p>Two strings are concatenated with the <span class="sansserif">#,</span> message
</p><div class="display">
<pre class="display"><span class="sansserif">&rsquo;Hello&rsquo;, &rsquo; &rsquo;, &rsquo;my beloved&rsquo;, &rsquo; &rsquo;, &rsquo;friend&rsquo;
&rArr; &rsquo;Hello my beloved friend&rsquo;</span>
</pre></div>

<a name="index-string_002c-character-access"></a>
<p>Access to a character in a string is done with the keyword message
<span class="sansserif">#at:</span> and its index position in the string:
</p><div class="display">
<pre class="display"><span class="sansserif">&rsquo;Hello&rsquo; at: 1 &rArr; $H
&rsquo;Hello&rsquo; at: 5 &rArr; $o</span>
</pre></div>

<p>Observe how a character is prefixed with the &ldquo;$&rdquo; symbol.
</p>
<p><strong>Caution.</strong> The index position starts naturally from 1 to the
string length.
</p>
<p>To change one character, use the companion two keywords message
<span class="sansserif">#at:put:</span>. The argument must be noted as a character:
</p><div class="display">
<pre class="display"><span class="sansserif">&rsquo;Hello&rsquo; at: 2 put: $a; yourself
&rArr; &rsquo;Hallo&rsquo;</span>
</pre></div>

<p>Observe the use of the cascade with the <span class="sansserif">#yourself</span> message. It is
sent to the instance string to get it returned.
</p>
<div class="float"><a name="helloBelle"></a>
<blockquote class="indentedblock">
<p><em>Replace each character of
the string &rsquo;Hello&rsquo; to become &rsquo;Belle&rsquo;</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.8: </strong>Hello to Belle</p></div></div>
<a name="index-character_002c-ascii"></a>
<p>Character can be converted to integer and integer to character:
</p><div class="display">
<pre class="display"><span class="sansserif">$A asciiValue &rArr; 65
(65 + 25) asCharacter &rArr; $Z</span>
</pre></div>

<a name="index-string_002c-shuffled"></a>
<a name="index-collection_002c-shuffled"></a>
<p>Shuffling a string is funny but without much use. Nevertheless,
shuffling apply to any kind of collection, not only to string, and it
proves to be of some use as we may see later:
</p><div class="display">
<pre class="display"><span class="sansserif">&rsquo;hello world&rsquo; shuffled
&rArr; &rsquo;wod llreohl&rsquo;</span>
</pre></div>

<a name="index-string_002c-_0023sorted"></a>
<p>We can write the same about sorting a string:
</p><div class="display">
<pre class="display"><span class="sansserif">&rsquo;bonjour&rsquo; sorted
&rArr;#($b $j $n $o $o $r $u)</span>
</pre></div>

<a name="Fun-with-variables"></a>
<h4 class="subsection">1.2.3 Fun with variables</h4>
<a name="index-variable"></a>
<p>How a variable can be fun? With Cuis-Smalltalk, a variable is the name of a box
that holds a value. A variable can hold a value of any class.
The value is strongly typed (we can always determine its Class), but the
variable (box) is not restricted to holding a value of a single type.
</p>
<p>To declare a variable we name it at the beginning of the script
and surround it by pipe charaters &ldquo;|&rdquo;.
</p>
<p>So far we sent messages directly to objects, we can send message to a
variable bound to an object too.
</p>
<p>Any object responds to the message #printString.
</p>
<div class="display">
<pre class="display"><span class="sansserif">| msg |
msg := &rsquo;hello world!&rsquo;.
Transcript show: msg capitalized printString, &rsquo; is a kind of &rsquo;.
Transcript show: msg class printString; newLine.
msg := 5.
Transcript show: msg printString, &rsquo; is a kind of &rsquo;.
Transcript show: msg class printString; newLine.</span>
</pre></div>

<p><strong>Caution.</strong> This ease of use has a drawback: when sending a
message to a variable bound to an object, the system does not check
that the object understands the message. Nevertheless there is a procedure
to catch this kind of situation.
</p>
<a name="Fun-with-collections"></a>
<h4 class="subsection">1.2.4 Fun with collections</h4>
<p>A Collection is a grouping of objects. Arrays and Lists are collections.  
A <span class="sansserif">String</span> is a collection of characters.
Many kinds of Collection have similar behaviors.
</p>
<a name="index-array"></a>
<p><span class="sansserif">Array</span> is a fixed size collection, contrary to string it can
contain any kind of literal enclosed in <span class="sansserif">#(&nbsp;)</span>:
</p><div class="display">
<pre class="display"><span class="sansserif">&quot;array of numbers&quot;
#(1 3 5 7 11 1.1)
&quot;array of mixed literals&quot;
#(1 &rsquo;friend&rsquo; $&amp; &rsquo;al&rsquo;)</span>
</pre></div>

<p>Using non literal expression in the array will not work as expected:
</p><div class="display">
<pre class="display"><span class="sansserif">#(1 2/3)
&rArr; #(1 2 #/ 3)</span>
</pre></div>

<a name="index-array_002c-dynamic"></a>
<p>Indeed, the &ldquo;/&rdquo; is interpreted as a literal symbol and
<span class="sansserif">2/3</span> is not interpreted as a fraction. To get a fraction
inserted in the array, you use a <em>run-time array</em> or <em>dynamic
array</em>, its elements are expressions separated by dot and surrounded
with <span class="sansserif">{ }</span>:
</p>
<div class="display">
<pre class="display"><span class="sansserif">{1 . 2/3 . 7.5}
&rArr; #(1 2/3 7.5)</span>
</pre></div>

<a name="index-array_002c-operation"></a>
<a name="index-array_002c-size"></a>
<p>With an array filled with numbers you can request information and
arithmetic operations:
</p><div class="display">
<pre class="display"><span class="sansserif">#(1 2 3 4) size &rArr; 4
#(1 2 3 4) + 10 &rArr; #(11 12 13 14)
#(1 2 3 4) / 10 &rArr; #(1/10 1/5 3/10 2/5)</span>
</pre></div>

<a name="index-collection_002c-_0023squared"></a>
<p>Mathematics operations work as well:
</p><div class="display">
<pre class="display"><span class="sansserif">#(1 2 3 4) squared &rArr; #(1 4 9 16)
#(0 30 45 60) degreeCos
&rArr; #(1.0 0.8660254037844386
0.7071067811865475 0.49999999999999994)</span>
</pre></div>

<a name="index-array_002c-statistic"></a>
<p>Basic statistic methods can be used directly on array of numbers:
</p>
<div class="display">
<pre class="display"><span class="sansserif">#(7.5 3.5 8.9) mean &rArr; 6.633333333333333 
#(7.5 3.5 8.9) range &rArr; 5.4
#(7.5 3.5 8.9) min &rArr; 3.5
#(7.5 3.5 8.9) max &rArr; 8.9</span>
</pre></div>

<p>To get an array of natural numbers from 1 to 100, we use the keyword
message <span class="sansserif">#to:</span>
</p>
<div class="display">
<pre class="display"><span class="sansserif">(1 to: 100) asArray
&rArr; #(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22
23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45
46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68
69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91
92 93 94 95 96 97 98 99 100)</span>
</pre></div>

<p>In this line of code, the message <span class="sansserif">#to:</span> is sent to <span class="sansserif">1</span>
with the argument <span class="sansserif">100</span>. It returns an interval object. The
message <span class="sansserif">#asArray</span> sent to the interval returns an array.
</p>
<div class="float"><a name="exeNegativeIntegers"></a>
<blockquote class="indentedblock">
<p><em>Create an
array of integer numbers ranging from -80 to 50.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.9: </strong>Negative integer numbers</p></div></div>
<a name="index-collection_002c-dynamic"></a>
<a name="index-collection_002c-OrderedCollection"></a>
<a name="index-collection_002c-_0023add_003a"></a>
<p>The size of n array is fixed size, it can not grow. An
<span class="sansserif">OrderedCollection</span> is a dynamic, ordered collection, it grows
when adding element with the <span class="sansserif">#add:</span> message:
</p><div class="float"><a name="dynamicSize"></a>
<div class="display">
<pre class="display"><span class="sansserif">| fibo | 
fibo := OrderedCollection newFrom: #(1 1 2 3).
fibo add: 5;
   add: 8;
   add: 13;
   add: 21.
fibo
&rArr; an OrderedCollection(1 1 2 3 5 8 13 21)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.7: </strong>Dynamic size collection</p></div></div>
<a name="index-collection_002c-_0023at_003a"></a>
<a name="index-collection_002c-_0023last"></a>
<a name="index-collection_002c-_0023indexOf_003a"></a>
<p>Index access to the elements of a collection is done with a variety of
messages. The index naturally ranges from 1 to the collection size:
</p><div class="display">
<pre class="display"><span class="sansserif">fibo at:1 &rArr; 1
fibo at: 6 &rArr; 5
fibo last &rArr; 21
fibo indexOf: 2 &rArr; 3
fibo at: fibo size &rArr; 21</span>
</pre></div>


<a name="Playing-with-enumerators"></a>
<h4 class="subsubheading">Playing with enumerators</h4>
<p>The collection comes with a set of helpful methods named
enumerators. They operate one each element of a collection.
</p>
<a name="index-collection_002c-set-operations-_0028union_002c-intersection_002c-difference_0029"></a>
<p>Set operations between two collections are computed with the
<span class="sansserif">#union:</span>, <span class="sansserif">#intersection:</span> and <span class="sansserif">#difference:</span> messages.
</p><div class="float"><a name="setOpe"></a>
<div class="display">
<pre class="display"><span class="sansserif">#(1 2 3 4 5) intersection: #(3 4 5 6 7)
&rArr; #(3 4 5)
#(1 2 3 4 5) union: #(3 4 5 6 7)
&rArr; a Set(5 4 3 2 7 1 6) 
#(1 2 3 4 5) difference: #(3 4 5 6 7)
&rArr; #(1 2)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.8: </strong>Set operations</p></div></div>
<div class="float"><a name="holeSet"></a>
<blockquote class="indentedblock">
<p><em>Construct the array of the
numbers 1,...,24,76,...,100.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.10: </strong>Hole in a set</p></div></div>
<p>Set operation works with any kind of content. We will discuss
comparing objects later.
</p><div class="display">
<pre class="display"><span class="sansserif">#(1 2 3 &rsquo;e&rsquo; 5) intersection: #(3.0 4 6 7 &rsquo;e&rsquo;)
&rArr; #(3 &rsquo;e&rsquo;)</span>
</pre></div>

<a name="index-collection_002c-_0023select_003a"></a>
<a name="index-collection_002c-enumerator-mechanism"></a>
<a name="index-block"></a>
<p>To select the prime numbers from 1 to 100, we use the <span class="sansserif">#select:</span>
enumerator. This message is sent to a collection, then it will select
each element of the collection returning true to a test condition:
</p>
<div class="float"><a name="prime100"></a>
<div class="display">
<pre class="display"><span class="sansserif">(1 to: 100) select: [:n | n isPrime]
&rArr;  #(2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71
73 79 83 89 97)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.9: </strong>Select prime numbers between 1 and 100</p></div></div>
<p>This example introduces the message <span class="sansserif">#select:</span> and block of code, a
primordial constituting element of the Cuis-Smalltalk model. A block of code,
delimited by square brackets, is a piece of code for later
execution(s). Let&rsquo;s explain how this script is executed:
</p>
<ul>
<li> <span class="sansserif">(1 to: 100)</span> is evaluated as an interval

</li><li> the block of code <span class="sansserif">[:n | n isPrime]</span> is instantiated (created)

</li><li> the message <span class="sansserif">#select:</span> is sent to the interval with the
 block of code as argument

</li><li> for each integer of the interval, the block of code is executed
 with its parameter <span class="sansserif">n</span> set to the integer value. Then, each
 time <span class="sansserif">n isPrime</span> evaluates to true, the <span class="sansserif">n</span> value
 is added to a new collection answered when the <span class="sansserif">select:</span>
 method finished testing each element of the collection.

</li></ul>

<p>Enumerators are tremendously powerful to process collection without
the need of index.
</p>
<div class="float"><a name="oddNumbers"></a>
<blockquote class="indentedblock">
<p><em>Select the odd number between
-20 and 45.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.11: </strong>Odd integers</p></div></div>
<p>You want to know the quantity of prime numbers under 100.  Just send
the message <span class="sansserif">#size</span> to the answered collection at
<a href="#prime100"><em>Example</em> 1.9</a>. The parenthesis are mandatory to ensure the <span class="sansserif">#size</span>
is sent last to the resulting collection:
</p><div class="float"><a name="qtyPrime100"></a>
<div class="display">
<pre class="display"><span class="sansserif">( (1 to: 100) select: [:n | n isPrime] ) size
&rArr; 25</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.10: </strong>Number of prime numbers between 1 and
100</p></div></div>
<p>For more clarity, we use a variable named <span class="sansserif">primeNumbers</span> to
remembers about the prime numbers list we build:
</p><div class="display">
<pre class="display"><span class="sansserif">| primeNumbers |
primeNumbers := (1 to: 100) select: [:n | n isPrime].
primeNumbers size</span>
</pre></div>

<div class="float"><a name="qtyPrime200"></a>
<blockquote class="indentedblock">
<p><em>Modify <a href="#qtyPrime100"><em>Example</em> 1.10</a> to calculate the number
of prime numbers between 101 and 200.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.12: </strong>Number of prime number between 101 and
200</p></div></div>
<div class="float"><a name="multiples7"></a>
<blockquote class="indentedblock">
<p><em>Build the list of the
multiples to 7 bellow 100</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.13: </strong>Multiple of 7</p></div></div>
<div class="float"><a name="oddNonPrime"></a>
<blockquote class="indentedblock">
<p><em>Build a
collection of the odd integers in [1 ; 100] which are not prime.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.14: </strong>Odd and non prime integers</p></div></div>
<a name="index-collection_002c-_0023collect_003a"></a>
<p>A sister enumerator to <span class="sansserif">#select:</span> is <span class="sansserif">#collect:</span>. It returns a
new collection of the same size, with each element transformed by a
block of code. When searching perfect cubic roots, it is useful to
know about some cubes:
</p>
<div class="float"><a name="cubesCollect"></a>
<div class="display">
<pre class="display"><span class="sansserif">(1 to: 10) collect:[:n | n cubed]
&rArr; #(1 8 27 64 125 216 343 512 729 1000)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.11: </strong>Collect cubes</p></div></div>
<p>The collected elements can be of a different type. Bellow, a string is
enumerated and integers are collected:
</p>
<div class="display">
<pre class="display"><span class="sansserif">&rsquo;Bonjour&rsquo; collect: [:c | c asciiValue ]
&rArr;  #(66 111 110 106 111 117 114)</span>
</pre></div>

<p>We can shift the ascii value, convert back to character then collect
in a new string. It is a simple cipher:
</p><div class="float"><a name="simpleCipher"></a>
<div class="display">
<pre class="display"><span class="sansserif">&rsquo;Bonjour&rsquo; collect: [:c | (c asciiValue + 1) asCharacter ]
&rArr; &rsquo;Cpokpvs&rsquo;</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.12: </strong>Simple cipher</p></div></div>
<div class="float"><a name="decodeCipher"></a>
<blockquote class="indentedblock">
<p><em>Write the script to decode
cipher &rsquo;Zpvs!bsf!cptt&rsquo;, it was encoded with <a href="#simpleCipher"><em>Example</em> 1.12</a></em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.15: </strong>Cipher decode</p></div></div>
<a name="index-Caesar-cipher"></a>
<p>The Caesar&rsquo;s cipher is based on shifting letter to the right in the
alphabet order.  The method is named after Julius Caesar, who used it
in his private correspondence with a shift of 3.
</p>
<div class="float"><a name="alphabetCipher"></a>
<blockquote class="indentedblock">
<p><em>Write a script
to collect the upper letters representing the Caesar&rsquo;s cipher. The
expected answers is</em> #($D $E $F $G $H $I $J $K $L $M $N $O $P $Q $R $S
$T $U $V $W $X $Y $Z $A $B $C)
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.16: </strong>Alphabet Caesar&rsquo;s cipher</p></div></div>
<p>Once you get the alphabet cipher right, you can encode your first
message:
</p><div class="float"><a name="encodeCaesar"></a>
<blockquote class="indentedblock">
<p><em>Encode the
phrase &rsquo;SMALLTALKEXPRESSION&rsquo;.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.17: </strong>Encode with Caesar&rsquo;s cipher</p></div></div>
<p>And decode message:
</p><div class="float"><a name="decodeCaesar"></a>
<blockquote class="indentedblock">
<p><em>Decode the
message &rsquo;DOHDMDFWDHVW&rsquo;.</em>
</p></blockquote>


<div class="float-caption"><p><strong><em>Exercise</em> 1.18: </strong>Decode with Caesar&rsquo;s cipher</p></div></div>
<a name="Fun-with-loops"></a>
<h4 class="subsubheading">Fun with loops</h4>
<p>Collection can be iterated with traditional loops: there is a whole
family of <em>repeat</em>, <em>while</em> and <em>for</em> loops.
</p>
<a name="index-loop_002c-for"></a>
<a name="index-for-loop"></a>
<p>A simple <em>for</em> loop between two integer values is written with
the keyword message <span class="sansserif">#to:do:</span>, the last argument is a block of code
executed for each index:
</p><div class="float"><a name="forLoop"></a>
<div class="display">
<pre class="display"><span class="sansserif">| sequence |
sequence := OrderedCollection new.
1 to: 10 do: [:k | sequence add: 1 / k].
sequence
&rArr; an OrderedCollection(1 1/2 1/3 1/4 1/5 1/6 1/7 1/8 1/9 1/10)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.13: </strong>A <em>for</em> loop</p></div></div>
<p>A collect writes more concisely, though:
</p><div class="display">
<pre class="display"><span class="sansserif">(1 to: 10) collect: [:k | 1/k]</span>
</pre></div>

<p>To step with a different value than 1, a third numeric argument is
inserted:
</p><div class="display">
<pre class="display"><span class="sansserif">1 to: 10 by: 0.5 do: [:k | sequence add: 1 / k]</span>
</pre></div>

<a name="index-loop_002c-repeat"></a>
<a name="index-repeat"></a>
<a name="index-Fibonacci-sequence"></a>
<p>A repeated loop without index or any collection is written with the
<span class="sansserif">#timesRepeat:</span> message:
</p><div class="float"><a name="repeatLoop"></a>
<div class="display">
<pre class="display"><span class="sansserif">| fibo |
fibo := OrderedCollection newFrom: #(1 1).
10 timesRepeat: [
   fibo add: (fibo last + fibo atLast: 2)].
fibo
&rArr; an OrderedCollection(1 1 2 3 5 8 13 21 34 55 89 144)</span>
</pre></div>

<div class="float-caption"><p><strong><em>Example</em> 1.14: </strong>A <em>repeat</em> loop</p></div></div>
<p>The quotient of consecutive Fibonacci terms converge toward the golden
value:
</p><div class="display">
<pre class="display"><span class="sansserif">fibo pairsDo: [:i :j |
   Transcript show: (j / i ) asFloat ; cr]
&rArr; 1.0
&rArr; 1.5
&rArr; 1.6
&rArr; 1.6153846153846154
&rArr; 1.6176470588235294
&rArr; 1.6179775280898876</span>
</pre></div>


<hr>
<div class="header">
<p>
Next: <a href="Introduction-to-the-system-classes.html#Introduction-to-the-system-classes" accesskey="n" rel="next">Introduction to the system classes</a>, Previous: <a href="Installing-and-configuring-Cuis_002dSmalltalk.html#Installing-and-configuring-Cuis_002dSmalltalk" accesskey="p" rel="prev">Installing and configuring Cuis-Smalltalk</a>, Up: <a href="Getting-started.html#Getting-started" accesskey="u" rel="up">Getting started</a> &nbsp; [<a href="Indexes.html#Indexes" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
