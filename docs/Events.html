<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This book is for Cuis-Smalltalk (5.0#4253), a free and modern
implementation of the Smalltalk language and environment.

Copyright (C) 2020 K. Dickey, H. Fernandes, J. Vuletich






Compilation : October 29, 2020

Documentation source: https://github.com/Cuis-Smalltalk/TheCuisBook 



The contents of this book are protected under Creative Commons
Attribution-ShareAlike 4.0 International.

You are free to:


Share - copy and redistribute the material in any medium or
format


Adapt - remix, transform, and build upon the material for any
purpose, even commercially.



Under the following terms:


Attribution. You must give appropriate credit, provide a link to
the license, and indicate if changes were made. You may do so in any
reasonable manner, but not in any way that suggests the licensor
endorses you or your use.


Share Alike. If you remix, transform, or build upon the material,
you must distribute your contributions under the same license as the
original.

Complete license: https://creativecommons.org/licenses/by-sa/4.0/legalcode
 -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Events (The Cuis-Smalltalk Book)</title>

<meta name="description" content="Events (The Cuis-Smalltalk Book)">
<meta name="keywords" content="Events (The Cuis-Smalltalk Book)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="Indexes.html" rel="index" title="Indexes">
<link href="index.html" rel="up" title="Top">
<link href="Process.html" rel="next" title="Process">
<link href="The-Fundamentals-of-Morph.html" rel="prev" title="The Fundamentals of Morph">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">


</head>

<body lang="en">
<span id="Events"></span><div class="header">
<p>
Next: <a href="Process.html" accesskey="n" rel="next">Process</a>, Previous: <a href="The-Fundamentals-of-Morph.html" accesskey="p" rel="prev">The Fundamentals of Morph</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Indexes.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Events-1"></span><h2 class="chapter">8 Events</h2>

<p><strong>What just happened?</strong>
</p>
<p>We talked above about control flow, how one makes decisions about
what to do in making calculations.
We talked about this like the entire computer processing resource
was dedicated to this task.
But it isn&rsquo;t so.  Computers may be fast at some calculations,
but they are only
so fast, and when there are many things to do, one shares and takes turns.
</p>
<p>So aside from &ldquo;do this and then do that&rdquo;, <em>event</em>s can happen.
</p>
<p>Also, a computer may be fast enough that it literally has &ldquo;nothing&rdquo; to do.
What does it do then?  When a processor &ldquo;goes to sleep&rdquo;,
how do we get its attention?
</p>
<p>You are reading the right chapter to know.
</p>
<p>There are two basic kinds of system events.
</p>
<p>Modern integrated <em>System On a Chip</em> (<em>SOC</em>) hardware
has many circuits which are active at the same time.  So one kind
of event is sensing something happening in the world.
Class <code>EventSensor</code> handles
keyboard key press and mouse <em>hardware interrupts</em>, translating
between hardware signals and software event objects.  For us, 
the class <code>MorphicEvent</code> and its subclasses are quite important.
Basically, morphs &ldquo;raise their hand&rdquo; and say what events, if any, they
are interested in receiving and implement methods which
get event objects which hold the information that the events capture.
</p>
<p>The second kind of event is quite similar, but
is used to march time forward.  We are interested in 
timer alarms and in particular <em>steps</em> which is used to
coordinate updates to the display and manage processing of queued
input events. 
There is a class <code>StepMessage</code>,
and you can look at the &ldquo;stepping&rdquo; method category
in the <code>Morph</code> class.  These timed clock events are used
to <em>time slice</em> long running tasks and do housekeeping
which we will describe in the next chapter on processes.
</p>
<p>Events are critical to understanding how the user interface works.
In brief, there is a <code>PasteUpMorph</code> which is the screen background
graphic and the associated <em>World State</em>.  When you <kbd>Right-Click</kbd>
on this morph, it is the one which brings up the World Menu.
The World State tracks the cursor, which is a <code>HandMorph</code> and
as Morphs change position and appearance, also keeps
a <code>DamageRecorder</code> to track what parts of the display have changed
so that only the &ldquo;damaged&rdquo; areas need be redrawn.
</p>
<p>As <code>MouseMoveEvent</code>s are generated, the <code>HandMorph</code> adjusts
its screen position.  When mouse and keystroke events arrive,
the <code>HandMorph</code> coordinates the &ldquo;dispatch&rdquo; of events to
the proper morph under the hand as well as displaying tool tips
and carrying morphs in transit during drag operations.
</p>
<p>As we saw above with <code>ColorClickEllipse</code>, any morph may
override default <code>Morph</code> methods to assert that it handles
various user events and the methods which take the
associated event objects when events arrive.
</p>
<p>Basically, user input events are generated, a <code>HandMorph</code>
reflects any cursor movement, morphs react to events, each long running
task gets a time slice and makes some progress,
any display changes are updated on the screen, and the next step
happens.  Time marches forward a step.
</p>
<p>This happens over and over and over,
keeping the juggler&rsquo;s illusion that all balls
in the air are moving at once.  Underneath, the balls are each moving
just a bit, in sequence.
</p>





<hr>
<div class="header">
<p>
Next: <a href="Process.html" accesskey="n" rel="next">Process</a>, Previous: <a href="The-Fundamentals-of-Morph.html" accesskey="p" rel="prev">The Fundamentals of Morph</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="Indexes.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
